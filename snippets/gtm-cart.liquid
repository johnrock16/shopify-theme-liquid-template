{%- comment -%}
  Expected params:
  - product
  - products
  - variant
  - event
  - title
{%- endcomment -%}

{% case event %}
  {% when 'add_to_cart' %}
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const buttonElement = document.querySelector('button.product-form__submit');

        buttonElement.addEventListener('click', (e) => {
          e.preventDefault();
          window.dataLayerManager.pushToDataLayer('add_to_cart', {
            "ecommerce": {
              "currency": {{ shop.currency | json }},
              "value": {{ product.price | divided_by: 100.0 }},
              "items": [
                {
                  "item_id": {{ product.id }},
                  "item_name": {{ product.title | json }},
                  "item_variant": {{ variant.title | json }},
                  "item_vendor": {{  product.vendor | json }},
                  "price": {{ product.price | divided_by: 100.0 }},
                  "quantity": 1
                }
              ]
            }
          });
        });
      });
    </script>
{% endcase %}
